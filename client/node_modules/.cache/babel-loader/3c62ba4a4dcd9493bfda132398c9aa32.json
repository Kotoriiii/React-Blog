{"ast":null,"code":"import axios from \"axios\";\nconst request = axios.create();\nrequest.interceptors.request.use(config => {\n  if (config.method === \"put\" || config.method === \"delete\" || config.url === '/posts' && config.method === \"post\") {\n    var _localStorage$getItem;\n\n    const {\n      token\n    } = localStorage.getItem('user');\n    console.log((_localStorage$getItem = localStorage.getItem('user')) === null || _localStorage$getItem === void 0 ? void 0 : _localStorage$getItem.username);\n    config.headers.Authorization = \"Bearer \" + token;\n  }\n\n  return config;\n}, error => {\n  alert(\"request error\");\n  return Promise.reject(error);\n});\nrequest.interceptors.response.use(response => {\n  let res = response.data;\n  return res;\n}, error => {\n  return Promise.reject(error);\n});\nexport const get = (url, params) => {\n  return request.get(url, {\n    params\n  });\n};\nexport const post = (url, data) => {\n  return request.post(url, data);\n};\nexport const deletePost = url => {\n  return request.delete(url);\n};\nexport default request;","map":{"version":3,"sources":["/Users/jasonliii/Desktop/react-blog/client/src/axios/request.js"],"names":["axios","request","create","interceptors","use","config","method","url","token","localStorage","getItem","console","log","username","headers","Authorization","error","alert","Promise","reject","response","res","data","get","params","post","deletePost","delete"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,OAAO,GAAGD,KAAK,CAACE,MAAN,EAAhB;AAEAD,OAAO,CAACE,YAAR,CAAqBF,OAArB,CAA6BG,GAA7B,CAAiCC,MAAM,IAAI;AACvC,MAAGA,MAAM,CAACC,MAAP,KAAkB,KAAlB,IAA2BD,MAAM,CAACC,MAAP,KAAkB,QAA7C,IACCD,MAAM,CAACE,GAAP,KAAe,QAAf,IAA2BF,MAAM,CAACC,MAAP,KAAiB,MADhD,EACyD;AAAA;;AACrD,UAAM;AAACE,MAAAA;AAAD,QAAUC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAhB;AACAC,IAAAA,OAAO,CAACC,GAAR,0BAAYH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAZ,0DAAY,sBAA8BG,QAA1C;AACAR,IAAAA,MAAM,CAACS,OAAP,CAAeC,aAAf,GAA+B,YAAYP,KAA3C;AACH;;AAED,SAAOH,MAAP;AACH,CATD,EASEW,KAAK,IAAI;AACPC,EAAAA,KAAK,CAAC,eAAD,CAAL;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACH,CAZD;AAcAf,OAAO,CAACE,YAAR,CAAqBiB,QAArB,CAA8BhB,GAA9B,CAAkCgB,QAAQ,IAAI;AAC1C,MAAIC,GAAG,GAAGD,QAAQ,CAACE,IAAnB;AACA,SAAOD,GAAP;AACH,CAHD,EAGEL,KAAK,IAAI;AACP,SAAOE,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACH,CALD;AAOA,OAAO,MAAMO,GAAG,GAAG,CAAChB,GAAD,EAAKiB,MAAL,KAAgB;AAC/B,SAAOvB,OAAO,CAACsB,GAAR,CAAYhB,GAAZ,EAAgB;AAACiB,IAAAA;AAAD,GAAhB,CAAP;AACH,CAFM;AAIP,OAAO,MAAMC,IAAI,GAAG,CAAClB,GAAD,EAAKe,IAAL,KAAc;AAC9B,SAAOrB,OAAO,CAACwB,IAAR,CAAalB,GAAb,EAAiBe,IAAjB,CAAP;AACH,CAFM;AAIP,OAAO,MAAMI,UAAU,GAAInB,GAAD,IAAS;AAC/B,SAAON,OAAO,CAAC0B,MAAR,CAAepB,GAAf,CAAP;AACH,CAFM;AAIP,eAAeN,OAAf","sourcesContent":["import axios from \"axios\"\n\nconst request = axios.create()\n\nrequest.interceptors.request.use(config => {\n    if(config.method === \"put\" || config.method === \"delete\" \n    || (config.url === '/posts' && config.method ===\"post\")) {\n        const {token} = localStorage.getItem('user')\n        console.log(localStorage.getItem('user')?.username)\n        config.headers.Authorization = \"Bearer \" + token\n    }\n\n    return config;\n},error => {\n    alert(\"request error\")\n    return Promise.reject(error)\n})\n\nrequest.interceptors.response.use(response => {\n    let res = response.data\n    return res\n},error => {\n    return Promise.reject(error)\n})\n\nexport const get = (url,params) => {\n    return request.get(url,{params})\n}\n\nexport const post = (url,data) => {\n    return request.post(url,data)\n}\n\nexport const deletePost = (url) => {\n    return request.delete(url)\n}\n\nexport default request;"]},"metadata":{},"sourceType":"module"}